const{assign:a}=Object;DefaultStyleOptions={audioInfo:{marginBottom:'5px',width:'100%'},audioInfoDescContainer:{alignItems:'flexStart',display:'flex',flexDirection:'column',fontSize:'12px',justifyContent:'space-between',paddingLeft:'10px',paddingRight:'10px',width:'100%'},audioInfoImage:{height:'100px',width:'100px'},controlItem:{alignItems:'center',border:'1px solid #f88',backgroundColor:'#f88',borderRadius:'30px',display:'flex',flexGrow:'0',height:'36px',justifyContent:'center',padding:'20px 0',width:'36px'},controls:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'space-around',width:'100%'},cpplayer:{backgroundColor:'#111188',border:'2px solid #009',borderRadius:'8px',boxSizing:'border-box',dislay:'flex',flexDirection:'column',marginBottom:'16px',padding:'16px'},muteBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},nextTrackBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},prevTrackBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},playBtn:{alignItems:'center',backgroundColor:'#fff',borderRadius:'50%',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',fontSize:'24px',height:'60px',justifyContent:'center',padding:'18px',width:'60px'},pauseBtn:{alignItems:'center',backgroundColor:'#fff',borderRadius:'50%',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',fontSize:'24px',height:'60px',justifyContent:'center',padding:'18px',width:'60px'},PlaylistPlayIcons:{fontSize:'10px'},playlistBtn:{backgroundColor:'#f88',borderRadius:'5px',border:'1px solid #000',color:'#000',display:'flex',flexDirection:'column',gap:'10px',margin:'10px 0',padding:'10px'},progressBar:{borderRadius:'5px',backgroundColor:'#fff',display:'flex',flexDirection:'row',height:'5px',margin:'20px 0',position:'relative',width:'80%'},playlist:{backgroundColor:'#fff',borderRadius:'5px',height:'100px',overflowY:'scroll',padding:'10px',scrollbarWidth:'none',width:'100%'},row1:{display:'flex',flexDirection:'column',justifyContent:'space-between',alignItems:'center',width:'100%'},row2:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'space-between',marginTop:'8px',width:'100%'},seekBar:{backgroundColor:'#000',borderRadius:'5px',height:'100%',width:'0%'},seekControls:{backgroundColor:'transparent',border:'none',display:'flex',flexDirection:'row',justifyContent:'space-between',width:'75px'},seekForwardBtn:{alignItems:'center',border:'1px solid #fff',backgroundColor:'#fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},seekBackwardBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},timelapse:{color:'#fff',fontSize:'12px',marginLeft:'5px',marginRight:'5px',textAlign:'left',width:'auto'},timeline:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'center',width:'100%'},track:{alignItems:'center',borderBottom:'1px solid #888',display:'flex',flexDirection:'row',justifyContent:'space-between',padding:'5px'},togglePlaylistBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},trackControls:{backgroundColor:'transparent',border:'none',display:'flex',flexDirection:'row',justifyContent:'space-between',width:'75px'},unmuteBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',width:'16px',height:'16px',justifyContent:'center',flexGrow:'0',padding:'8px'}};class CP_Player{constructor(A,b,c,d={}){this.playlist=A;this.trackIndex=0;this.currentTrack=this.playlist[this.trackIndex];this.music=new Audio(this.currentTrack);this.options=b;this.activeAudioTags={};this.options.useFontAwesome&&this.loadFontAwesome();this.styleOptions=this.deepMerge(JSON.parse(JSON.stringify(DefaultStyleOptions)),d);var _=document.getElementById(c);this.playerSection=this.createPlayerDOM(c);_.replaceWith(this.playerSection);this.initUI(c);this.initEventListeners();this.renderPlaylist();this.applyStyles(this.styleOptions)}loadFontAwesome(){if(!document.querySelector('link[href*=\"fontawesome\"]')){let B=document.createElement('link');B.rel='stylesheet';B.href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css';document.head.appendChild(B)}}deepMerge(C,_b){let _c=obj=>obj&&typeof obj==='object';for(let _a in _b)if(_c(_b[_a])){(!C[_a]||!_c(C[_a]))&&(C[_a]={});this.deepMerge(C[_a],_b[_a])}else C[_a]=_b[_a];return C}createPlayerDOM(D){var _B=document.createElement('player'),_d=document.createElement('div'),m=document.createElement('div'),o=document.createElement('div'),u=document.createElement('div'),w=document.createElement('i'),aJ=document.createElement('div'),aL=document.createElement('style');_B.classList.add('cpplayer');_B.id=D;var _C=document.createElement('div');_C.className='row1';_d.className='row2';if(this.options.audioInfo){var E=document.createElement('div'),g=document.createElement('div'),I=document.createElement('div'),k=document.createElement('div');E.className='audioInfo';var f=document.createElement('img');f.className='audioInfoImage';f.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKYAAACUCAMAAAAu5KLjAAAATlBMVEXv8fNod4dgcIH3+Prr7e91g5GdprDk5+pUZnjY3ODz9PZldIXf4+b5+vpcbX5aa32krLWSnaeqsrp9ipe+xMuzusLR1dqKlqHKz9W4v8UC8A7gAAACeklEQVR4nO2a7ZaCIBCGFQptKEXRsvu/0bXNTexjYzEZ95z3Of306NMMDCOSJAAAAAAAAAAAAAAAAAAAAAA8QslmPrS45fG0nY012dKWqdDzKeyy8dycRPoJ8kYuqZlt9Uc0hTpA879plnkoIqJm2e1DqXQ8zXwXOFGJlIipGVr3oOkAzU/yTJMk9T/PG3BpkuxaU58zz8cyadLOai2ETo1fE8mjKRs9rJ6l9fJk0aR9cVvji2q9mtbpRHTj4cmhSbtp1+NxAxbNxm3rtN2sVLN1Xzn01uNFjEXzPNG0rmZf8Q9PxiqL5nEyNivnQnm0qe1+0Yzxynarm69mOjW5TnVuHmR4CtIxH4Npx8vkMLfK9t6TaRVqxRBPkY6rkDyXPzXf3I1PrjW9s7kQohAqG7uRc3GLcXmXd7YOKevUqap3iRNLd/4X9cSTs988HJx+k9o8dSkVuRevpHuf1tIh786fWIembB/3woRZm+Z9xofxOeZ9FZrPYnkdnz95X4OmrIunlt9NHq1F83nGh7xX13jya77K+OB5ne/smtK8juU1npe883RII1SXv1r28+iSd+ZoUv3+28GlLrFqEr3J+C3vklXzZSW69zwYPk0yvl+LhFJRN7Xdpscv44OnTrk0vWPpRjV2W0zKb1yyalJi3tXLVWgGZDy6JlEVEsvYux6JCrOMqtlbhn5dj6gZnPGomn0sAypRbE3aVOGWEaMZnvGYmtWssymxNGfFMpamtjPP+UQ66zH3YApOzvwjzY39kKZZVJOCV/Ep4ccb/DT321LMJ1920+Oyg92o2dShx5j+gPwAi5+GBQAAAAAAAAAAAAAAAAAAAGBJvgD+5DZit7mvxgAAAABJRU5ErkJggg==';f.alt='Album Cover';E.appendChild(f);g.className='audioInfoDescContainer';E.appendChild(g);var h=document.createElement('div');h.className='audioInfoTitle';h.innerHTML='<i class=\"fa-solid fa-music\"></i> Unknown';g.appendChild(h);I.className='audioInfoAlbum';I.innerHTML='<i class=\"fa-solid fa-book\"></i> Unknown';g.appendChild(I);var j=document.createElement('div');j.className='audioInfoArtist';j.innerHTML='<i class=\"fa-solid fa-user\"></i> Unknown';g.appendChild(j);k.className='audioInfoYear';k.innerHTML='<i class=\"fa-solid fa-calendar\"></i> Unknown';g.appendChild(k);_C.appendChild(E)}var l=document.createElement('div');l.className='controls';m.className='playBtn';var n=document.createElement('i');n.className='fa-solid fa-play';m.appendChild(n);l.appendChild(m);o.className='pauseBtn hide';var p=document.createElement('i');p.className='fa-solid fa-pause';o.appendChild(p);l.appendChild(o);if(this.options.showSoundControl){var q=document.createElement('div'),s=document.createElement('div');q.className='muteBtn';var R=document.createElement('i');R.className='fa-solid fa-volume-high';q.appendChild(R);l.appendChild(q);s.className='unmuteBtn hide';var t=document.createElement('i');t.className='fa-solid fa-volume-xmark';s.appendChild(t);l.appendChild(s)}u.className='seekControls';var v=document.createElement('div');v.className='seekBackward';w.className='fa-solid fa-share fa-flip-horizontal';v.appendChild(w);u.appendChild(v);if(this.options.seekControls){var x=document.createElement('div');x.className='seekForward';var y=document.createElement('i');y.className='fa-solid fa-share';x.appendChild(y);u.appendChild(x);l.appendChild(u)}if(this.options.nextPreviousControls){var z=document.createElement('div'),aB=document.createElement('i'),aD=document.createElement('i');z.className='trackControls';var aA=document.createElement('div');aA.className='prevTrack';aB.className='fa-solid fa-backward-step';aA.appendChild(aB);z.appendChild(aA);var aC=document.createElement('div');aC.className='nextTrack';aD.className='fa-solid fa-forward-step';aC.appendChild(aD);z.appendChild(aC);l.appendChild(z)}var aE=document.createElement('div');aE.className='timeline';if(this.options.showTimeLapse){var aF=document.createElement('div');aF.className='timelapse';aF.innerHTML='00:00';aE.appendChild(aF)}if(this.options.playlist){var aG=document.createElement('div'),aI=document.createElement('div');aG.className='togglePlaylist';var aH=document.createElement('i');aH.className='fa-solid fa-bars';aG.appendChild(aH);l.appendChild(aG);aI.className='playlist hide';_d.appendChild(aI)}_C.appendChild(l);_B.appendChild(_C);aJ.className='progressBar';var aK=document.createElement('div');aK.className='seekBar';aJ.appendChild(aK);aE.appendChild(aJ);_C.appendChild(aE);_B.appendChild(_d);aL.textContent=`.hide{display: none !important}.cpplayer{display:flex;flex-direction:column;border:2px solid #900;border-radius: 8px;background-color: #bb1111;padding:16px}.active_track{background-color: #000;color:#fff;padding:8px}.track:last-child{border-bottom: none!important}`;_B.appendChild(aL);return _B}applyStyles(_A){_A.container&&a(this.playerSection.style,this.styleOptions.container);var aM=this.playerSection,_D=this.playerSection.querySelector('.progressBar'),L=this.playerSection.querySelector('.row2'),N=this.playerSection.querySelector('.pauseBtn'),U=this.playerSection.querySelector('.seekBar');_A.cpplayer&&a(aM.style,this.styleOptions.cpplayer);var aN=this.playerSection.querySelector('.controls');_A.controls&&a(aN.style,this.styleOptions.controls);_A.progressBar&&a(_D.style,this.styleOptions.progressBar);if(this.options.audioInfo){var _e=this.playerSection.querySelector('.audioInfo'),G=this.playerSection.querySelector('.audioInfoDescContainer');_A.audioInfo&&a(_e.style,this.styleOptions.audioInfo);var F=this.playerSection.querySelector('.audioInfoImage');_A.audioInfoImage&&a(F.style,this.styleOptions.audioInfoImage);_A.audioInfoDescContainer&&a(G.style,this.styleOptions.audioInfoDescContainer)}if(this.options.playlist){var H=this.playerSection.querySelector('.playlist'),J=H.querySelectorAll('.track');_A.playlist&&a(H.style,this.styleOptions.playlist);var _i=H.querySelectorAll('.playlistItem');for(const aQ of _i)_A.playlistItem&&a(aQ.style,this.styleOptions.playlistItem);for(const aR of J)_A.track&&a(aR.style,this.styleOptions.track)}var K=this.playerSection.querySelector('.row1');_A.row1&&a(K.style,this.styleOptions.row1);_A.row2&&a(L.style,this.styleOptions.row2);var M=this.playerSection.querySelector('.playBtn');_A.playBtn&&a(M.style,this.styleOptions.playBtn);_A.pauseBtn&&a(N.style,this.styleOptions.pauseBtn);if(this.options.showSoundControl){var O=this.playerSection.querySelector('.muteBtn');_A.muteBtn&&a(O.style,this.styleOptions.muteBtn);var P=this.playerSection.querySelector('.unmuteBtn');_A.unmuteBtn&&a(P.style,this.styleOptions.unmuteBtn)}if(this.options.seekControls){var Q=this.playerSection.querySelector('.seekForward'),S=this.playerSection.querySelector('.seekControls');_A.seekForwardBtn&&a(Q.style,this.styleOptions.seekForwardBtn);var _r=this.playerSection.querySelector('.seekBackward');_A.seekBackwardBtn&&a(_r.style,this.styleOptions.seekBackwardBtn);_A.seekControls&&a(S.style,this.styleOptions.seekControls)}var T=this.playerSection.querySelector('.timeline');_A.timeline&&a(T.style,this.styleOptions.timeline);_A.seekBar&&a(U.style,this.styleOptions.seekBar);if(this.options.showTimeLapse){var V=this.playerSection.querySelector('.timelapse');_A.timelapse&&a(V.style,this.styleOptions.timelapse)}if(this.options.playlist){var W=this.playerSection.querySelector('.playlist'),Y=this.playerSection.querySelectorAll('.PlaylistPlayIcon');_A.playlistContainer&&a(W.style,this.styleOptions.playlistContainer);var X=this.playerSection.querySelector('.togglePlaylist');_A.togglePlaylistBtn&&a(X.style,_A.togglePlaylistBtn);_A.PlaylistPlayIcons}if(this.options.nextPreviousControls){var Z=this.playerSection.querySelector('.trackControls'),aP=this.playerSection.querySelector('.nextTrack');_A.trackControls&&a(Z.style,this.styleOptions.trackControls);var aO=this.playerSection.querySelector('.prevTrack');_A.prevTrackBtn&&a(aO.style,_A.prevTrackBtn);_A.nextTrackBtn&&a(aP.style,_A.nextTrackBtn)}}initUI(aS){var aT=document.getElementById(aS);this.playButton=aT.querySelector('.playBtn');this.pauseButton=aT.querySelector('.pauseBtn');this.options.showSoundControl&&(this.muteButton=aT.querySelector('.muteBtn'),this.unmuteButton=aT.querySelector('.unmuteBtn'));this.seekBar=aT.querySelector('.seekBar');this.options.showTimeLapse&&(this.timeLapse=aT.querySelector('.timelapse'));this.options.playlist&&(this.playlistContainer=aT.querySelector('.playlist'),this.togglePlaylistButton=aT.querySelector('.togglePlaylist'),this.PlaylistPlayIcons=aT.querySelectorAll('.PlaylistPlayIcon'));this.options.nextPreviousControls&&(this.prevTrackButton=aT.querySelector('.prevTrack'),this.nextTrackButton=aT.querySelector('.nextTrack'));this.options.seekControls&&(this.seekBackwordButton=aT.querySelector('.seekBackward'),this.seekForwardButton=aT.querySelector('.seekForward'));this.options.audioInfo&&(this.activeAudioInfoImage=aT.querySelector('.audioInfoImage'),this.activeAudioInfoDescContainer=aT.querySelector('.audioInfoDescContainer'),this.activeAudioInfoTitle=aT.querySelector('.audioInfoTitle'),this.activeAudioInfoArtist=aT.querySelector('.audioInfoArtist'),this.activeAudioInfoAlbum=aT.querySelector('.audioInfoAlbum'),this.activeAudioInfoYear=aT.querySelector('.audioInfoYear'))}initEventListeners(){this.playButton.addEventListener('click',()=>this.play());this.pauseButton.addEventListener('click',()=>this.pause());this.options.showSoundControl&&(this.muteButton.addEventListener('click',()=>this.mute()),this.unmuteButton.addEventListener('click',()=>this.unmute()));this.options.nextPreviousControls&&(this.prevTrackButton.addEventListener('click',()=>this.prevTrack()),this.nextTrackButton.addEventListener('click',()=>this.nextTrack()));this.options.playlist&&this.togglePlaylistButton.addEventListener('click',()=>this.playlistContainer.classList.toggle('hide'));this.options.seekControls&&(this.seekForwardButton.addEventListener('click',()=>this.seekForward()),this.seekBackwordButton.addEventListener('click',()=>this.seekBackward()));this.seekBar.parentElement.addEventListener('click',e=>this.seek(e));this.music.addEventListener('timeupdate',()=>this.updateSeekBar());this.options.showTimeLapse&&this.music.addEventListener('timeupdate',()=>this.updateTimelapse());this.music.addEventListener('ended',()=>this.nextTrack())}play(){this.music.play();this.playButton.classList.add('hide');this.pauseButton.classList.remove('hide');this.readMetadata(this.currentTrack).then(res=>this.activeAudioTags=res)}pause(){this.music.pause();this.playButton.classList.remove('hide');this.pauseButton.classList.add('hide')}mute(){this.music.muted=!0;this.muteButton.classList.add('hide');this.unmuteButton.classList.remove('hide')}unmute(){this.music.muted=!1;this.muteButton.classList.remove('hide');this.unmuteButton.classList.add('hide')}seekForward(){this.music.currentTime+=10}seekBackward(){this.music.currentTime-=10}seek(e){var aU=this.seekBar.parentElement.offsetWidth,aV=e.offsetX;this.music.currentTime=(aV/aU)*this.music.duration}updateSeekBar(){var aW=(this.music.currentTime/this.music.duration)*100;this.seekBar.style.width=`${aW}%`}updateTimelapse(){var aX=isFinite(this.music?.currentTime)?this.music.currentTime:0,aY=isFinite(this.music?.duration)?this.music.duration:0,aZ=~~aX/60,bA=~~aX%60,_E=~~aY/60,_f=~~aY%60;var _g=`${`${aZ}`.split('.')[0]}:${bA<10?'0':''}${bA} / ${`${_E}`.split('.')[0]}:${_f<10?'0':''}${_f}`;this.timeLapse.innerHTML=_g}nextTrack(){this.trackIndex=(this.trackIndex+1)%this.playlist.length;this.changeTrack()}prevTrack(){this.trackIndex=(this.trackIndex-1+this.playlist.length)%this.playlist.length;this.changeTrack()}changeTrack(){this.currentTrack=this.playlist[this.trackIndex];this.music.src=this.currentTrack;this.play();this.updateActiveTrack()}updateActiveTrack(){if(this.options.playlist){var tracks=this.playlistContainer.querySelectorAll('.track');for(const[bB,bC] of tracks.entries())bB===this.trackIndex?bC.classList.add('active_track'):bC.classList.remove('active_track')}}renderAudioInfo=bD=>{if(this.options.audioInfo&&bD){bD.image?this.activeAudioInfoImage.src=bD.image:this.activeAudioInfoImage.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKYAAACUCAMAAAAu5KLjAAAATlBMVEXv8fNod4dgcIH3+Prr7e91g5GdprDk5+pUZnjY3ODz9PZldIXf4+b5+vpcbX5aa32krLWSnaeqsrp9ipe+xMuzusLR1dqKlqHKz9W4v8UC8A7gAAACeklEQVR4nO2a7ZaCIBCGFQptKEXRsvu/0bXNTexjYzEZ95z3Of306NMMDCOSJAAAAAAAAAAAAAAAAAAAAAA8QslmPrS45fG0nY012dKWqdDzKeyy8dycRPoJ8kYuqZlt9Uc0hTpA879plnkoIqJm2e1DqXQ8zXwXOFGJlIipGVr3oOkAzU/yTJMk9T/PG3BpkuxaU58zz8cyadLOai2ETo1fE8mjKRs9rJ6l9fJk0aR9cVvji2q9mtbpRHTj4cmhSbtp1+NxAxbNxm3rtN2sVLN1Xzn01uNFjEXzPNG0rmZf8Q9PxiqL5nEyNivnQnm0qe1+0Yzxynarm69mOjW5TnVuHmR4CtIxH4Npx8vkMLfK9t6TaRVqxRBPkY6rkDyXPzXf3I1PrjW9s7kQohAqG7uRc3GLcXmXd7YOKevUqap3iRNLd/4X9cSTs988HJx+k9o8dSkVuRevpHuf1tIh786fWIembB/3woRZm+Z9xofxOeZ9FZrPYnkdnz95X4OmrIunlt9NHq1F83nGh7xX13jya77K+OB5ne/smtK8juU1npe883RII1SXv1r28+iSd+ZoUv3+28GlLrFqEr3J+C3vklXzZSW69zwYPk0yvl+LhFJRN7Xdpscv44OnTrk0vWPpRjV2W0zKb1yyalJi3tXLVWgGZDy6JlEVEsvYux6JCrOMqtlbhn5dj6gZnPGomn0sAypRbE3aVOGWEaMZnvGYmtWssymxNGfFMpamtjPP+UQ66zH3YApOzvwjzY39kKZZVJOCV/Ep4ccb/DT321LMJ1920+Oyg92o2dShx5j+gPwAi5+GBQAAAAAAAAAAAAAAAAAAAGBJvgD+5DZit7mvxgAAAABJRU5ErkJggg==';bD.TIT2?this.activeAudioInfoTitle.innerHTML='<i class=\"fa-solid fa-music\"></i> <span>'+bD.TIT2+'</span>':this.activeAudioInfoTitle.innerHTML='<i class=\"fa-solid fa-music\"></i> <span>'+'Unknown'+'</span>';bD.TPE1?this.activeAudioInfoArtist.innerHTML='<i class=\"fa-solid fa-user\"></i> '+bD.TPE1:this.activeAudioInfoArtist.innerHTML='<i class=\"fa-solid fa-user\"></i> '+'Unknown';bD.TALB?this.activeAudioInfoAlbum.innerHTML='<i class=\"fa-solid fa-book\"></i> '+bD.TALB:this.activeAudioInfoAlbum.innerHTML='<i class=\"fa-solid fa-book\"></i> '+'Unknown';bD.TDRC?this.activeAudioInfoYear.innerHTML='<i class=\"fa-solid fa-calendar\"></i> '+bD.TDRC:this.activeAudioInfoYear.innerHTML='<i class=\"fa-solid fa-calendar\"></i> '+'Unknown'}};renderPlaylist(){this.options.playlist&&(this.playlist.forEach((bE,bF)=>{var bG=document.createElement('div');let bH=bE.split('/').pop();bG.className='track';if(bF===this.trackIndex)bG.classList.add('active_track');bG.innerHTML=`<span class="track-number">${bF+1} ${bH}</span><i class="fa-solid fa-play PlaylistPlayIcon" data-playlistID="${bF}"></i>`;this.playlistContainer.appendChild(bG)}),this.playlistPlayButtons=this.playerSection.querySelectorAll('.PlaylistPlayIcon'),this.playlistPlayButtons.forEach(bI=>bI.addEventListener('click',()=>{this.playTrack(bI.getAttribute('data-playlistID'));this.updateActiveTrack()})))}playTrack(bJ){this.trackIndex=bJ;this.changeTrack()}async readMetadata(bK){var bL=await fetch(bK).then(res=>res).then(r=>r.blob()).catch(e=>console.error(e));if(!bL)return;var bM=new FileReader;bM.onload=()=>{this.renderAudioInfo(CP_Player.parseID3Tags(bM.result))};bM.readAsArrayBuffer(bL)}static parseID3Tags(bN){var bO=new DataView(bN);if(String.fromCharCode(bO.getUint8(0))==='I'&&String.fromCharCode(bO.getUint8(1))==='D'&&String.fromCharCode(bO.getUint8(2))==='3'){var bP=`${bO.getUint8(3)}.${bO.getUint8(4)}`;var bQ=CP_Player.getID3Size(bO,6),bR={};let bS=10;while (bS<bQ) {var _F=String.fromCharCode(bO.getUint8(bS),bO.getUint8(bS+1),bO.getUint8(bS+2),bO.getUint8(bS+3)),_G=bO.getUint32(bS+4);if(_G===0)break;if(_F==='APIC')bR.image=CP_Player.parseAPICFrame(bO,bS+10,_G);else{var _h=bO.getUint8(bS+10),_I=new TextDecoder(_h===1?'utf-16':'utf-8').decode(new DataView(bN, bS+11, _G-1));bR[_F]=_I}bS+=10+_G}return bR}console.error('No ID3 tags found.');return null}static parseAPICFrame(bT,bU,bV){let bW=bU;let bX='';while (bT.getUint8(bW)!==0)bX+=String.fromCharCode(bT.getUint8(bW++));bW++;bW++;while (bT.getUint8(bW)!==0)bW++;bW++;var bY=CP_Player.arrayBufferToBase64(new Uint8Array(bT.buffer, bW, bV-(bW-bU)));return`data:${bX};base64,${bY}`}static arrayBufferToBase64(bZ){let cA='';var cB=new Uint8Array(bZ);var cC=cB.byteLength;for(let i=0;i<cC;i+=10000)cA+=String.fromCharCode.apply(null,cB.subarray(i,i+10000));return btoa(cA)}static getID3Size(cD,cE){var cF=((cD.getUint8(cE)&0x7f)<<21)|((cD.getUint8(cE+1)&0x7f)<<14)|((cD.getUint8(cE+2)&0x7f)<<7)|(cD.getUint8(cE+3)&0x7f);return cF}}
