const{assign:a}=Object;DefaultStyleOptions={audioInfo:{marginBottom:'5px',width:'100%',minWidth:'50%'},audioInfoDescContainer:{alignItems:'flexStart',display:'flex',flexDirection:'column',fontSize:'12px',justifyContent:'space-between',paddingLeft:'10px',paddingRight:'10px',width:'100%'},audioInfoImage:{height:'100px',width:'100px'},clearPlaylist:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',textAlign:'center',borderRadius:'10px',boxShadow:'1px 1px 1px 1px #aaa',cursor:'pointer',display:'flex',flexGrow:'0',fontWeight:'bold',height:'100px',justifyContent:'center',marginLeft:'5px',marginBottom:'10px',padding:'12px',width:'100px'},controlItem:{alignItems:'center',border:'1px solid #f88',backgroundColor:'#f88',borderRadius:'30px',display:'flex',flexGrow:'0',height:'36px',justifyContent:'center',padding:'20px 0',width:'36px'},controls:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'space-around',width:'100%'},cpplayer:{backgroundColor:'#111188',border:'2px solid #009',borderRadius:'8px',boxSizing:'border-box',dislay:'flex',flexDirection:'column',marginBottom:'16px',padding:'16px'},muteBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},nextTrackBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},prevTrackBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},playBtn:{alignItems:'center',backgroundColor:'#fff',borderRadius:'50%',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',fontSize:'24px',height:'60px',justifyContent:'center',margin:'0 10px',padding:'18px',width:'60px'},pauseBtn:{alignItems:'center',backgroundColor:'#fff',borderRadius:'50%',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',fontSize:'24px',height:'60px',justifyContent:'center',margin:'0 10px',padding:'18px',width:'60px'},PlaylistPlayIcons:{fontSize:'14px'},playlistBtn:{backgroundColor:'#f88',borderRadius:'5px',border:'1px solid #000',color:'#000',display:'flex',flexDirection:'column',gap:'10px',margin:'10px 0',padding:'10px'},progressBar:{borderRadius:'5px',backgroundColor:'#fff',cursor:'pointer',display:'flex',flexDirection:'row',height:'5px',margin:'20px 0',position:'relative',width:'80%'},playlist:{backgroundColor:'#fff',borderRadius:'5px',height:'100px',marginBottom:'10px',overflowY:'scroll',padding:'10px',scrollbarWidth:'none',width:'100%'},row1:{display:'flex',flexDirection:'column',justifyContent:'space-between',alignItems:'center',width:'100%'},row2:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'space-between',marginTop:'8px',width:'100%'},seekBar:{backgroundColor:'#000',borderRadius:'5px',height:'100%',width:'0%'},seekControls:{backgroundColor:'transparent',border:'none',display:'flex',flexDirection:'row',justifyContent:'space-between',width:'60px'},seekForwardBtn:{alignItems:'center',border:'1px solid #fff',backgroundColor:'#fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},seekBackwardBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},timelapse:{color:'#fff',fontSize:'12px',marginLeft:'5px',marginRight:'5px',textAlign:'left',width:'auto'},timeline:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'center',width:'100%'},track:{alignItems:'center',borderBottom:'1px solid #888',display:'flex',flexDirection:'row',justifyContent:'space-between',padding:'5px'},togglePlaylistBtn:{alignItems:'center',backgroundColor:'#fff',margin:'0 10px',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',flexGrow:'0',height:'16px',justifyContent:'center',padding:'12px',width:'16px'},trackControls:{backgroundColor:'transparent',border:'none',display:'flex',flexDirection:'row',justifyContent:'space-between',margin:'0 10px',width:'60px'},unmuteBtn:{alignItems:'center',backgroundColor:'#fff',border:'1px solid #fff',borderRadius:'30px',boxShadow:'1px 1px 1px 1px #aaa',color:'#000',display:'flex',width:'16px',height:'16px',justifyContent:'center',flexGrow:'0',padding:'12px'},volContainer:{display:'flex',flexDirection:'row',justifyContent:'space-between',width:'120px'},volumeControl:{'-webkit-appearance':'none',appearance:'none',height:'5px',marginTop:'10px',backgroundColor:'#dddddd',width:'70%'}};class CP_Player{constructor(A,b,c,d={}){this.playlist=A;this.trackIndex=0;this.playerVolume=10;this.currentTrack=this.playlist[this.trackIndex];this.music=new Audio(this.currentTrack);this.options=b;this.activeAudioTags={};this.amination_audioContext=this.anmation_analyser=this.animation_source=this.animation_dataArray=null;this.options.useFontAwesome&&this.loadFontAwesome();this.styleOptions=this.deepMerge(JSON.parse(JSON.stringify(DefaultStyleOptions)),d);var _=document.getElementById(c);this.playerSection=this.createPlayerDOM(c,this.options.layout);_.replaceWith(this.playerSection);this.initUI(c);this.initEventListeners();this.renderPlaylist();this.applyStyles(this.styleOptions)}loadFontAwesome(){if(!document.querySelector('link[href*=\"fontawesome\"]')){let B=document.createElement('link');B.rel='stylesheet';B.href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css';document.head.appendChild(B)}}deepMerge(C,_b){let _c=obj=>obj&&typeof obj==='object';for(let _a in _b)if(_c(_b[_a])){(!C[_a]||!_c(C[_a]))&&(C[_a]={});this.deepMerge(C[_a],_b[_a])}else C[_a]=_b[_a];return C}createPlayerDOM(D,_B='default'){switch(_B) {case 'compact':return this.createCompactLayout(D);case 'mini':return this.createMiniLayout(D);case 'default':case 'undefined':default:return this.createDefaultLayout(D)}}createDefaultLayout(_A){var E=document.createElement('player'),_d=document.createElement('div'),m=document.createElement('div'),o=document.createElement('div'),w=document.createElement('div'),y=document.createElement('i'),aM=document.createElement('div'),aO=document.createElement('style');E.classList.add('cpplayer');E.classList.add('default');E.id=_A;var _C=document.createElement('div');_C.className='row1';_d.className='row2';if(this.options.audioInfo){var _e=document.createElement('div'),g=document.createElement('div'),I=document.createElement('div'),k=document.createElement('div');_e.className='audioInfo';var f=document.createElement('img');f.className='audioInfoImage';f.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKYAAACUCAMAAAAu5KLjAAAATlBMVEXv8fNod4dgcIH3+Prr7e91g5GdprDk5+pUZnjY3ODz9PZldIXf4+b5+vpcbX5aa32krLWSnaeqsrp9ipe+xMuzusLR1dqKlqHKz9W4v8UC8A7gAAACeklEQVR4nO2a7ZaCIBCGFQptKEXRsvu/0bXNTexjYzEZ95z3Of306NMMDCOSJAAAAAAAAAAAAAAAAAAAAAA8QslmPrS45fG0nY012dKWqdDzKeyy8dycRPoJ8kYuqZlt9Uc0hTpA879plnkoIqJm2e1DqXQ8zXwXOFGJlIipGVr3oOkAzU/yTJMk9T/PG3BpkuxaU58zz8cyadLOai2ETo1fE8mjKRs9rJ6l9fJk0aR9cVvji2q9mtbpRHTj4cmhSbtp1+NxAxbNxm3rtN2sVLN1Xzn01uNFjEXzPNG0rmZf8Q9PxiqL5nEyNivnQnm0qe1+0Yzxynarm69mOjW5TnVuHmR4CtIxH4Npx8vkMLfK9t6TaRVqxRBPkY6rkDyXPzXf3I1PrjW9s7kQohAqG7uRc3GLcXmXd7YOKevUqap3iRNLd/4X9cSTs988HJx+k9o8dSkVuRevpHuf1tIh786fWIembB/3woRZm+Z9xofxOeZ9FZrPYnkdnz95X4OmrIunlt9NHq1F83nGh7xX13jya77K+OB5ne/smtK8juU1npe883RII1SXv1r28+iSd+ZoUv3+28GlLrFqEr3J+C3vklXzZSW69zwYPk0yvl+LhFJRN7Xdpscv44OnTrk0vWPpRjV2W0zKb1yyalJi3tXLVWgGZDy6JlEVEsvYux6JCrOMqtlbhn5dj6gZnPGomn0sAypRbE3aVOGWEaMZnvGYmtWssymxNGfFMpamtjPP+UQ66zH3YApOzvwjzY39kKZZVJOCV/Ep4ccb/DT321LMJ1920+Oyg92o2dShx5j+gPwAi5+GBQAAAAAAAAAAAAAAAAAAAGBJvgD+5DZit7mvxgAAAABJRU5ErkJggg==';f.alt='Album Cover';_e.appendChild(f);g.className='audioInfoDescContainer';_e.appendChild(g);var h=document.createElement('div');h.className='audioInfoTitle';h.innerHTML='<i class=\"fa-solid fa-music\"></i> Unknown';g.appendChild(h);I.className='audioInfoAlbum';I.innerHTML='<i class=\"fa-solid fa-book\"></i> Unknown';g.appendChild(I);var j=document.createElement('div');j.className='audioInfoArtist';j.innerHTML='<i class=\"fa-solid fa-user\"></i> Unknown';g.appendChild(j);k.className='audioInfoYear';k.innerHTML='<i class=\"fa-solid fa-calendar\"></i> Unknown';g.appendChild(k);_C.appendChild(_e);this.createDancingBars(_e)}var l=document.createElement('div');l.className='controls';m.className='playBtn';var n=document.createElement('i');n.className='fa-solid fa-play';m.appendChild(n);l.appendChild(m);o.className='pauseBtn hide';var p=document.createElement('i');p.className='fa-solid fa-pause';o.appendChild(p);l.appendChild(o);if(this.options.showSoundControl){var q=document.createElement('div'),s=document.createElement('i'),u=document.createElement('i');q.className='vol-container';var R=document.createElement('div');R.className='muteBtn';s.className='fa-solid fa-volume-high';R.appendChild(s);q.appendChild(R);var t=document.createElement('div');t.className='unmuteBtn hide';u.className='fa-solid fa-volume-xmark';t.appendChild(u);q.appendChild(t);var v=document.createElement('input');v.type='range';v.className='volume-control';v.value=parseInt(this.playerVolume)*10;v.max=10;v.min=0;v.step=1;q.appendChild(v);l.appendChild(q)}w.className='seekControls';var x=document.createElement('div');x.className='seekBackward';y.className='fa-solid fa-share fa-flip-horizontal';x.appendChild(y);w.appendChild(x);if(this.options.seekControls){var z=document.createElement('div');z.className='seekForward';var aA=document.createElement('i');aA.className='fa-solid fa-share';z.appendChild(aA);w.appendChild(z);l.appendChild(w)}if(this.options.nextPreviousControls){var aB=document.createElement('div'),aD=document.createElement('i'),aF=document.createElement('i');aB.className='trackControls';var aC=document.createElement('div');aC.className='prevTrack';aD.className='fa-solid fa-backward-step';aC.appendChild(aD);aB.appendChild(aC);var aE=document.createElement('div');aE.className='nextTrack';aF.className='fa-solid fa-forward-step';aE.appendChild(aF);aB.appendChild(aE);l.appendChild(aB)}var aG=document.createElement('div');aG.className='timeline';if(this.options.showTimeLapse){var aH=document.createElement('div');aH.className='timelapse';aH.innerHTML='00:00';aG.appendChild(aH)}if(this.options.playlist){var aI=document.createElement('div'),aK=document.createElement('div');aI.className='togglePlaylist';var aJ=document.createElement('i');aJ.className='fa-solid fa-bars';aI.appendChild(aJ);l.appendChild(aI);aK.className='playlist hide';_d.appendChild(aK);var aL=document.createElement('div');aL.className='clearPlaylist hide';aL.innerHTML='Clear Playlist';_d.appendChild(aL)}_C.appendChild(l);E.appendChild(_C);aM.className='progressBar';var aN=document.createElement('div');aN.className='seekBar';aM.appendChild(aN);aG.appendChild(aM);_C.appendChild(aG);E.appendChild(_d);aO.textContent=`.hide{display: none !important}.cpplayer{display:flex;flex-direction:column;border:2px solid #900;border-radius: 8px;background-color: #bb1111;padding:16px}.active_track{background-color: #000;color:#fff;padding:8px}.track:last-child{border-bottom: none!important}.equalizer {display: flex; gap: 5px;height: 100px;width: 200px;align-items: flex-end; background: rgba(255, 255, 255, 0.05);padding: 10px;border-radius: 10px;overflow: hidden}.bar {width: 20px; height: 100%;background: linear-gradient(180deg, #ff3d00, #ff9100);transform-origin: bottom;transform: scaleY(0.02);transition: transform 0.1s ease-out}.audioInfo{background:linear-gradient(180deg, #999, #333)}`;E.appendChild(aO);return E}createCompactLayout(aP){var aQ=document.createElement('player'),_D=document.createElement('div'),_i=document.createElement('div'),K=document.createElement('div'),M=document.createElement('div'),P=document.createElement('div');aQ.classList.add('cpplayer');aQ.classList.add('compact');aQ.id=aP;var aR=document.createElement('div');aR.className='row1';_D.className='row2';if(this.options.audioInfo){var _E=document.createElement('div'),G=document.createElement('div');_E.className='audioInfo';var F=document.createElement('div');F.className='audioInfoDescContainer';_E.appendChild(F);G.className='audioInfoTitle';G.innerHTML='<i class=\"fa-solid fa-music\"></i> Unknown';F.appendChild(G);aR.appendChild(_E)}var H=document.createElement('div');H.className='controls';this.createDancingBars(H);_i.className='playBtn';var J=document.createElement('i');J.className='fa-solid fa-play';_i.appendChild(J);H.appendChild(_i);K.className='pauseBtn hide';var L=document.createElement('i');L.className='fa-solid fa-pause';K.appendChild(L);H.appendChild(K);M.className='timeline';if(this.options.showTimeLapse){var N=document.createElement('div');N.className='timelapse';N.innerHTML='00:00';M.appendChild(N)}H.appendChild(M);var O=document.createElement('div');O.className='progressBar';P.className='seekBar';O.appendChild(P);M.appendChild(O);if(this.options.showSoundControl){var Q=document.createElement('div'),S=document.createElement('i'),U=document.createElement('i');Q.className='vol-container';var _r=document.createElement('div');_r.className='muteBtn';S.className='fa-solid fa-volume-high';_r.appendChild(S);Q.appendChild(_r);var T=document.createElement('div');T.className='unmuteBtn hide';U.className='fa-solid fa-volume-xmark';T.appendChild(U);Q.appendChild(T);var V=document.createElement('input');V.type='range';V.className='volume-control';V.value=parseInt(this.playerVolume)*10;V.max=10;V.min=0;V.step=1;Q.appendChild(V);H.appendChild(Q)}if(this.options.seekControls){var W=document.createElement('div'),Y=document.createElement('i'),aS=document.createElement('i');W.className='seekControls';var X=document.createElement('div');X.className='seekBackward';Y.className='fa-solid fa-share fa-flip-horizontal';X.appendChild(Y);W.appendChild(X);var Z=document.createElement('div');Z.className='seekForward';aS.className='fa-solid fa-share';Z.appendChild(aS);W.appendChild(Z);H.appendChild(W)}if(this.options.nextPreviousControls){var aT=document.createElement('div'),aV=document.createElement('i'),aX=document.createElement('i');aT.className='trackControls';var aU=document.createElement('div');aU.className='prevTrack';aV.className='fa-solid fa-backward-step';aU.appendChild(aV);aT.appendChild(aU);var aW=document.createElement('div');aW.className='nextTrack';aX.className='fa-solid fa-forward-step';aW.appendChild(aX);aT.appendChild(aW);H.appendChild(aT)}if(this.options.playlist){var aY=document.createElement('div'),bA=document.createElement('div');aY.className='togglePlaylist';var aZ=document.createElement('i');aZ.className='fa-solid fa-bars';aY.appendChild(aZ);H.appendChild(aY);bA.className='playlist hide';_D.appendChild(bA);var bB=document.createElement('div');bB.className='clearPlaylist hide';bB.innerHTML='Clear Playlist';_D.appendChild(bB)}aR.appendChild(H);aQ.appendChild(aR);aQ.appendChild(_D);var bC=document.createElement('style');bC.textContent=`.hide{display: none !important}.cpplayer{display:flex;flex-direction:column;border:2px solid #900;border-radius: 8px;background-color: #bb1111;padding:16px}.active_track{background-color: #000;color:#fff;padding:8px}.track:last-child{border-bottom: none!important}.equalizer {display: flex; gap: 5px;height: 100px;width: 200px;align-items: flex-end; background: rgba(255, 255, 255, 0.05);padding: 10px;border-radius: 10px;overflow: hidden}.bar {width: 20px; height: 100%;background: linear-gradient(180deg, #ff3d00, #ff9100);transform-origin: bottom;transform: scaleY(0.02);transition: transform 0.1s ease-out}.audioInfo{background:linear-gradient(180deg, #999, #333)} .track{align-items: center; border-bottom: 1px solid rgb(136, 136, 136); display: flex; flex-direction: row; justify-content: space-between; padding: 5px} .track-actions span{cursor:pointer; display:inline-block; padding:8px}`;aQ.appendChild(bC);return aQ}createMiniLayout(bD){var bE=document.createElement('player'),bG=document.createElement('div'),_o=document.createElement('div'),_q=document.createElement('div'),bI=document.createElement('div'),bK=document.createElement('i'),bT=document.createElement('div'),bV=document.createElement('style');bE.classList.add('cpplayer');bE.classList.add('mini');bE.id=bD;var bF=document.createElement('div');bF.className='row1';bG.className='row2';if(this.options.audioInfo){var bH=document.createElement('div'),_g=document.createElement('div'),_I=document.createElement('div'),_k=document.createElement('div');bH.className='audioInfo';var _f=document.createElement('img');_f.className='audioInfoImage';_f.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKYAAACUCAMAAAAu5KLjAAAATlBMVEXv8fNod4dgcIH3+Prr7e91g5GdprDk5+pUZnjY3ODz9PZldIXf4+b5+vpcbX5aa32krLWSnaeqsrp9ipe+xMuzusLR1dqKlqHKz9W4v8UC8A7gAAACeklEQVR4nO2a7ZaCIBCGFQptKEXRsvu/0bXNTexjYzEZ95z3Of306NMMDCOSJAAAAAAAAAAAAAAAAAAAAAA8QslmPrS45fG0nY012dKWqdDzKeyy8dycRPoJ8kYuqZlt9Uc0hTpA879plnkoIqJm2e1DqXQ8zXwXOFGJlIipGVr3oOkAzU/yTJMk9T/PG3BpkuxaU58zz8cyadLOai2ETo1fE8mjKRs9rJ6l9fJk0aR9cVvji2q9mtbpRHTj4cmhSbtp1+NxAxbNxm3rtN2sVLN1Xzn01uNFjEXzPNG0rmZf8Q9PxiqL5nEyNivnQnm0qe1+0Yzxynarm69mOjW5TnVuHmR4CtIxH4Npx8vkMLfK9t6TaRVqxRBPkY6rkDyXPzXf3I1PrjW9s7kQohAqG7uRc3GLcXmXd7YOKevUqap3iRNLd/4X9cSTs988HJx+k9o8dSkVuRevpHuf1tIh786fWIembB/3woRZm+Z9xofxOeZ9FZrPYnkdnz95X4OmrIunlt9NHq1F83nGh7xX13jya77K+OB5ne/smtK8juU1npe883RII1SXv1r28+iSd+ZoUv3+28GlLrFqEr3J+C3vklXzZSW69zwYPk0yvl+LhFJRN7Xdpscv44OnTrk0vWPpRjV2W0zKb1yyalJi3tXLVWgGZDy6JlEVEsvYux6JCrOMqtlbhn5dj6gZnPGomn0sAypRbE3aVOGWEaMZnvGYmtWssymxNGfFMpamtjPP+UQ66zH3YApOzvwjzY39kKZZVJOCV/Ep4ccb/DT321LMJ1920+Oyg92o2dShx5j+gPwAi5+GBQAAAAAAAAAAAAAAAAAAAGBJvgD+5DZit7mvxgAAAABJRU5ErkJggg==';_f.alt='Album Cover';bH.appendChild(_f);_g.className='audioInfoDescContainer';bH.appendChild(_g);var _h=document.createElement('div');_h.className='audioInfoTitle';_h.innerHTML='<i class=\"fa-solid fa-music\"></i> Unknown';_g.appendChild(_h);_I.className='audioInfoAlbum';_I.innerHTML='<i class=\"fa-solid fa-book\"></i> Unknown';_g.appendChild(_I);var _j=document.createElement('div');_j.className='audioInfoArtist';_j.innerHTML='<i class=\"fa-solid fa-user\"></i> Unknown';_g.appendChild(_j);_k.className='audioInfoYear';_k.innerHTML='<i class=\"fa-solid fa-calendar\"></i> Unknown';_g.appendChild(_k);bF.appendChild(bH);this.createDancingBars(bH)}var _l=document.createElement('div');_l.className='controls';if(this.options.nextPreviousControls){var _m=document.createElement('div');_m.className='prevTrack';var _n=document.createElement('i');_n.className='fa-solid fa-backward-step';_m.appendChild(_n);_l.appendChild(_m)}_o.className='playBtn';var _p=document.createElement('i');_p.className='fa-solid fa-play';_o.appendChild(_p);_l.appendChild(_o);_q.className='pauseBtn hide';var _R=document.createElement('i');_R.className='fa-solid fa-pause';_q.appendChild(_R);_l.appendChild(_q);if(this.options.nextPreviousControls){var _s=document.createElement('div');_s.className='nextTrack';var _t=document.createElement('i');_t.className='fa-solid fa-forward-step';_s.appendChild(_t);_l.appendChild(_s)}if(this.options.showSoundControl){var _u=document.createElement('div'),_w=document.createElement('i'),_y=document.createElement('i');_u.className='vol-container';var _v=document.createElement('div');_v.className='muteBtn';_w.className='fa-solid fa-volume-high';_v.appendChild(_w);_u.appendChild(_v);var _x=document.createElement('div');_x.className='unmuteBtn hide';_y.className='fa-solid fa-volume-xmark';_x.appendChild(_y);_u.appendChild(_x);var _z=document.createElement('input');_z.type='range';_z.className='volume-control';_z.value=parseInt(this.playerVolume)*10;_z.max=10;_z.min=0;_z.step=1;_u.appendChild(_z);_l.appendChild(_u)}bI.className='seekControls';var bJ=document.createElement('div');bJ.className='seekBackward';bK.className='fa-solid fa-share fa-flip-horizontal';bJ.appendChild(bK);bI.appendChild(bJ);if(this.options.seekControls){var bL=document.createElement('div');bL.className='seekForward';var bM=document.createElement('i');bM.className='fa-solid fa-share';bL.appendChild(bM);bI.appendChild(bL);_l.appendChild(bI)}var bN=document.createElement('div');bN.className='timeline';if(this.options.showTimeLapse){var bO=document.createElement('div');bO.className='timelapse';bO.innerHTML='00:00';bN.appendChild(bO)}if(this.options.playlist){var bP=document.createElement('div'),bR=document.createElement('div');bP.className='togglePlaylist';var bQ=document.createElement('i');bQ.className='fa-solid fa-bars';bP.appendChild(bQ);_l.appendChild(bP);bR.className='playlist hide';bG.appendChild(bR);var bS=document.createElement('div');bS.className='clearPlaylist hide';bS.innerHTML='Clear Playlist';bG.appendChild(bS)}bF.appendChild(_l);bE.appendChild(bF);bT.className='progressBar';var bU=document.createElement('div');bU.className='seekBar';bT.appendChild(bU);bN.appendChild(bT);bF.appendChild(bN);bE.appendChild(bG);bV.textContent=`.hide{display: none !important}.cpplayer{display:flex;flex-direction:column;border:2px solid #900;border-radius: 8px;background-color: #bb1111;padding:16px}.active_track{background-color: #000;color:#fff;padding:8px}.track:last-child{border-bottom: none!important}.equalizer {display: flex; gap: 5px;height: 100px;width: 200px;align-items: flex-end; background: rgba(255, 255, 255, 0.05);padding: 10px;border-radius: 10px;overflow: hidden}.bar {width: 20px; height: 100%;background: linear-gradient(180deg, #ff3d00, #ff9100);transform-origin: bottom;transform: scaleY(0.02);transition: transform 0.1s ease-out}.audioInfo{background:linear-gradient(180deg, #999, #333)}`;bE.appendChild(bV);return bE}applyStyles(bW){bW.container&&a(this.playerSection.style,this.styleOptions.container);var bX=this.playerSection,bZ=this.playerSection.querySelector('.progressBar'),cB=this.playerSection.querySelectorAll('.bar'),_O=this.playerSection.querySelector('.row2'),_Q=this.playerSection.querySelector('.pauseBtn'),_Z=this.playerSection.querySelector('.seekBar');bW.cpplayer&&a(bX.style,this.styleOptions.cpplayer);var bY=this.playerSection.querySelector('.controls');bW.controls&&a(bY.style,this.styleOptions.controls);bW.progressBar&&a(bZ.style,this.styleOptions.progressBar);if(this.options.audioInfo){var cA=this.playerSection.querySelector('.audioInfo'),_G=this.playerSection.querySelector('.audioInfoDescContainer');bW.audioInfo&&a(cA.style,this.styleOptions.audioInfo);var _F=this.playerSection.querySelector('.audioInfoImage');(bW.audioInfoImage&&_F)&&a(_F.style,this.styleOptions.audioInfoImage);bW.audioInfoDescContainer&&a(_G.style,this.styleOptions.audioInfoDescContainer);const cK=this.playerSection.querySelector('.equalizer');(bW.equalizer&&cK)&&a(cK.style,this.styleOptions.equalizer)}var _H=this.playerSection.querySelector('.equalizer');(bW.equalizer&&_H)&&a(_H.style,this.styleOptions.equalizer);for(const cL of cB)bW.bar&&a(cL.style,this.styleOptions.bar);if(this.options.playlist){var _J=this.playerSection.querySelector('.playlist');(bW.playlist&&_J)&&a(_J.style,this.styleOptions.playlist);if(_J){var _K=_J.querySelectorAll('.playlistItem');for(const cM of _K)bW.playlistItem&&a(cM.style,this.styleOptions.playlistItem);var _L=_J.querySelectorAll('.track');for(const cN of _L)bW.track&&a(cN.style,this.styleOptions.track)}var _M=this.playerSection.querySelector('.clearPlaylist');(bW.clearPlaylist&&_M)&&a(_M.style,this.styleOptions.clearPlaylist)}var _N=this.playerSection.querySelector('.row1');bW.row1&&a(_N.style,this.styleOptions.row1);bW.row2&&a(_O.style,this.styleOptions.row2);var _P=this.playerSection.querySelector('.playBtn');bW.playBtn&&a(_P.style,this.styleOptions.playBtn);bW.pauseBtn&&a(_Q.style,this.styleOptions.pauseBtn);if(this.options.showSoundControl){var cC=this.playerSection.querySelector('.muteBtn'),_T=this.playerSection.querySelector('.vol-container');bW.muteBtn&&a(cC.style,this.styleOptions.muteBtn);var _S=this.playerSection.querySelector('.unmuteBtn');bW.unmuteBtn&&a(_S.style,this.styleOptions.unmuteBtn);bW.volContainer&&a(_T.style,this.styleOptions.volContainer);var _U=this.playerSection.querySelector('.volume-control');bW.volumeControl&&a(_U.style,this.styleOptions.volumeControl)}if(this.options.seekControls){var _V=this.playerSection.querySelector('.seekForward'),_X=this.playerSection.querySelector('.seekControls');bW.seekForwardBtn&&a(_V.style,this.styleOptions.seekForwardBtn);var _W=this.playerSection.querySelector('.seekBackward');bW.seekBackwardBtn&&a(_W.style,this.styleOptions.seekBackwardBtn);bW.seekControls&&a(_X.style,this.styleOptions.seekControls)}var _Y=this.playerSection.querySelector('.timeline');bW.timeline&&a(_Y.style,this.styleOptions.timeline);bW.seekBar&&a(_Z.style,this.styleOptions.seekBar);if(this.options.showTimeLapse){var cD=this.playerSection.querySelector('.timelapse');bW.timelapse&&a(cD.style,this.styleOptions.timelapse)}if(this.options.playlist){var cE=this.playerSection.querySelector('.playlist'),cG=this.playerSection.querySelectorAll('.PlaylistPlayIcon');bW.playlistContainer&&a(cE.style,this.styleOptions.playlistContainer);var cF=this.playerSection.querySelector('.togglePlaylist');(bW.togglePlaylistBtn&&cF)&&a(cF.style,bW.togglePlaylistBtn);bW.PlaylistPlayIcons}if(this.options.nextPreviousControls){var cH=this.playerSection.querySelector('.trackControls'),cJ=this.playerSection.querySelector('.nextTrack');(bW.trackControls&&cH)&&a(cH.style,this.styleOptions.trackControls);var cI=this.playerSection.querySelector('.prevTrack');bW.prevTrackBtn&&a(cI.style,bW.prevTrackBtn);bW.nextTrackBtn&&a(cJ.style,bW.nextTrackBtn)}}initUI(cO){var cP=document.getElementById(cO);this.playButton=cP.querySelector('.playBtn');this.pauseButton=cP.querySelector('.pauseBtn');this.options.showSoundControl&&(this.muteButton=cP.querySelector('.muteBtn'),this.unmuteButton=cP.querySelector('.unmuteBtn'),this.volumeControl=cP.querySelector('.volume-control'));this.seekBar=cP.querySelector('.seekBar');this.options.showTimeLapse&&(this.timeLapse=cP.querySelector('.timelapse'));this.options.playlist&&(this.clearPlaylistButton=cP.querySelector('.clearPlaylist'),this.playlistContainer=cP.querySelector('.playlist'),this.togglePlaylistButton=cP.querySelector('.togglePlaylist'),this.PlaylistPlayIcons=cP.querySelectorAll('.PlaylistPlayIcon'));this.options.nextPreviousControls&&(this.prevTrackButton=cP.querySelector('.prevTrack'),this.nextTrackButton=cP.querySelector('.nextTrack'));this.options.seekControls&&(this.seekBackwordButton=cP.querySelector('.seekBackward'),this.seekForwardButton=cP.querySelector('.seekForward'));this.options.audioInfo&&(this.activeAudioInfoImage=cP.querySelector('.audioInfoImage'),this.activeAudioInfoDescContainer=cP.querySelector('.audioInfoDescContainer'),this.activeAudioInfoTitle=cP.querySelector('.audioInfoTitle'),this.activeAudioInfoArtist=cP.querySelector('.audioInfoArtist'),this.activeAudioInfoAlbum=cP.querySelector('.audioInfoAlbum'),this.activeAudioInfoYear=cP.querySelector('.audioInfoYear'));this.bars=cP.querySelectorAll('.bar')}initEventListeners(){this.playButton.addEventListener('click',e=>this.play(e),!1);this.pauseButton.addEventListener('click',()=>this.pause());this.options.showSoundControl&&(this.muteButton.addEventListener('click',()=>this.mute()),this.unmuteButton.addEventListener('click',()=>this.unmute()),this.volumeControl.addEventListener('input',e=>this.updateVolume(e)));this.options.nextPreviousControls&&(this.prevTrackButton.addEventListener('click',()=>this.prevTrack()),this.nextTrackButton.addEventListener('click',()=>this.nextTrack()));(this.options.playlist&&this.togglePlaylistButton)&&this.togglePlaylistButton.addEventListener('click',()=>{this.playlistContainer.classList.toggle('hide');this.clearPlaylistButton.classList.toggle('hide')});this.options.seekControls&&(this.seekForwardButton.addEventListener('click',()=>this.seekForward()),this.seekBackwordButton.addEventListener('click',()=>this.seekBackward()));this.seekBar.parentElement.addEventListener('click',e=>this.seek(e));this.music.addEventListener('timeupdate',()=>this.updateSeekBar());this.options.showTimeLapse&&this.music.addEventListener('timeupdate',()=>this.updateTimelapse());this.music.addEventListener('ended',()=>this.nextTrack());document.addEventListener('load',this.initialize_animation.bind(this));this.playerSection.addEventListener('click',e=>{if(e.target.classList.contains('PlaylistPlayIcon')){var cQ=e.target.getAttribute('data-playlistID');this.trackIndex=cQ;this.changeTrack(e);this.playlistContainer.children[cQ].classList.add('active_track')}if(e.target.classList.contains('PlaylistDeleteIcon')){this.playlist.splice(e.target.getAttribute('data-playlistID'),1);this.renderPlaylist()}e.target.classList.contains('clearPlaylist')&&(this.playlist=[],this.renderPlaylist(),this.music=new Audio)})}initialize_animation(){!this.animation_audioContext&&(this.animation_audioContext=new (window.AudioContext||window.webkitAudioContext),this.animation_analyser=this.animation_audioContext.createAnalyser(),this.animation_analyser.fftSize=64,this.animation_source=this.animation_audioContext.createMediaElementSource(this.music),this.animation_source.connect(this.animation_analyser),this.animation_analyser.connect(this.animation_audioContext.destination),this.animation_dataArray=new Uint8Array(this.animation_analyser.frequencyBinCount))}startAnimateBars(){this.initialize_animation();this.animation_analyser.getByteFrequencyData(this.animation_dataArray);this?.bars.length>0&&this?.bars.forEach((cR,i)=>{var cS=this.animation_dataArray[i]||0,cT=Math.max(cS/255,0.02);cR.style.transform=`scaleY(${cT})`});requestAnimationFrame(this.startAnimateBars.bind(this))}stopAnimateBars(){for(const bar of this.bars)bar.style.transform='scaleY(0.02)'}play(e){this.music.play();this.playButton.classList.add('hide');this.pauseButton.classList.remove('hide');this.startAnimateBars();this.readMetadata(this.currentTrack).then(res=>this.activeAudioTags=res)}pause(){this.music.src!==''&&this.music.pause();this.playButton.classList.remove('hide');this.pauseButton.classList.add('hide');this.stopAnimateBars()}mute(){this.music.muted=!0;this.muteButton.classList.add('hide');this.unmuteButton.classList.remove('hide')}unmute(){this.music.muted=!1;this.muteButton.classList.remove('hide');this.unmuteButton.classList.add('hide')}updateVolume(e){this.music.volume=parseInt(e.target.value)/10}seekForward(){this.music.currentTime+=10}seekBackward(){this.music.currentTime-=10}seek(e){var cU=this.seekBar.parentElement.offsetWidth,cV=e.offsetX;this.music.currentTime=(cV/cU)*this.music.duration}updateSeekBar(){var cW=(this.music.currentTime/this.music.duration)*100;this.seekBar.style.width=`${cW}%`}updateTimelapse(){var cX=isFinite(this.music?.currentTime)?this.music.currentTime:0,cY=isFinite(this.music?.duration)?this.music.duration:0,cZ=~~cX/60,dA=~~cX%60,dB=~~cY/60,dC=~~cY%60;var dD=`${`${cZ}`.split('.')[0]}:${dA<10?'0':''}${dA} / ${`${dB}`.split('.')[0]}:${dC<10?'0':''}${dC}`;this.timeLapse.innerHTML=dD}nextTrack(e){this.trackIndex=(this.trackIndex+1)%this.playlist.length;this.changeTrack(e)}prevTrack(e){this.trackIndex=(this.trackIndex-1+this.playlist.length)%this.playlist.length;this.changeTrack(e)}changeTrack(e){if(this.playlist.length===0){this.music.src='';this.music=new Audio;return};this.currentTrack=this.playlist[this.trackIndex];this.music.src=this.currentTrack;this.play();this.updateActiveTrack()}updateActiveTrack(){if(this.options.playlist&&this.playlistContainer){var tracks=this.playlistContainer.querySelectorAll('.track');for(const[dE,dF] of tracks.entries())dE===this.trackIndex?dF.classList.add('active_track'):dF.classList.remove('active_track')}}renderAudioInfo=dG=>{if(this.options.audioInfo&&dG){dG.image&&this.activeAudioInfoImage?this.activeAudioInfoImage.src=dG.image:this.activeAudioInfoImage.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKYAAACUCAMAAAAu5KLjAAAATlBMVEXv8fNod4dgcIH3+Prr7e91g5GdprDk5+pUZnjY3ODz9PZldIXf4+b5+vpcbX5aa32krLWSnaeqsrp9ipe+xMuzusLR1dqKlqHKz9W4v8UC8A7gAAACeklEQVR4nO2a7ZaCIBCGFQptKEXRsvu/0bXNTexjYzEZ95z3Of306NMMDCOSJAAAAAAAAAAAAAAAAAAAAAA8QslmPrS45fG0nY012dKWqdDzKeyy8dycRPoJ8kYuqZlt9Uc0hTpA879plnkoIqJm2e1DqXQ8zXwXOFGJlIipGVr3oOkAzU/yTJMk9T/PG3BpkuxaU58zz8cyadLOai2ETo1fE8mjKRs9rJ6l9fJk0aR9cVvji2q9mtbpRHTj4cmhSbtp1+NxAxbNxm3rtN2sVLN1Xzn01uNFjEXzPNG0rmZf8Q9PxiqL5nEyNivnQnm0qe1+0Yzxynarm69mOjW5TnVuHmR4CtIxH4Npx8vkMLfK9t6TaRVqxRBPkY6rkDyXPzXf3I1PrjW9s7kQohAqG7uRc3GLcXmXd7YOKevUqap3iRNLd/4X9cSTs988HJx+k9o8dSkVuRevpHuf1tIh786fWIembB/3woRZm+Z9xofxOeZ9FZrPYnkdnz95X4OmrIunlt9NHq1F83nGh7xX13jya77K+OB5ne/smtK8juU1npe883RII1SXv1r28+iSd+ZoUv3+28GlLrFqEr3J+C3vklXzZSW69zwYPk0yvl+LhFJRN7Xdpscv44OnTrk0vWPpRjV2W0zKb1yyalJi3tXLVWgGZDy6JlEVEsvYux6JCrOMqtlbhn5dj6gZnPGomn0sAypRbE3aVOGWEaMZnvGYmtWssymxNGfFMpamtjPP+UQ66zH3YApOzvwjzY39kKZZVJOCV/Ep4ccb/DT321LMJ1920+Oyg92o2dShx5j+gPwAi5+GBQAAAAAAAAAAAAAAAAAAAGBJvgD+5DZit7mvxgAAAABJRU5ErkJggg==';dG.TIT2?this.activeAudioInfoTitle.innerHTML='<i class=\"fa-solid fa-music\"></i> <span>'+dG.TIT2+'</span>':this.activeAudioInfoTitle.innerHTML='<i class=\"fa-solid fa-music\"></i> <span>'+'Unknown'+'</span>';dG.TPE1&&this.activeAudioInfoArtist?this.activeAudioInfoArtist.innerHTML='<i class=\"fa-solid fa-user\"></i> '+dG.TPE1:this.activeAudioInfoArtist.innerHTML='<i class=\"fa-solid fa-user\"></i> '+'Unknown';dG.TALB&&this.activeAudioInfoAlbum?this.activeAudioInfoAlbum.innerHTML='<i class=\"fa-solid fa-book\"></i> '+dG.TALB:this.activeAudioInfoAlbum.innerHTML='<i class=\"fa-solid fa-book\"></i> '+'Unknown';dG.TDRC&&this.activeAudioInfoYear?this.activeAudioInfoYear.innerHTML='<i class=\"fa-solid fa-calendar\"></i> '+dG.TDRC:this.activeAudioInfoYear.innerHTML='<i class=\"fa-solid fa-calendar\"></i> '+'Unknown'}};resetAudioInfo(){this.activeAudioInfoImage.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKYAAACUCAMAAAAu5KLjAAAATlBMVEXv8fNod4dgcIH3+Prr7e91g5GdprDk5+pUZnjY3ODz9PZldIXf4+b5+vpcbX5aa32krLWSnaeqsrp9ipe+xMuzusLR1dqKlqHKz9W4v8UC8A7gAAACeklEQVR4nO2a7ZaCIBCGFQptKEXRsvu/0bXNTexjYzEZ95z3Of306NMMDCOSJAAAAAAAAAAAAAAAAAAAAAA8QslmPrS45fG0nY012dKWqdDzKeyy8dycRPoJ8kYuqZlt9Uc0hTpA879plnkoIqJm2e1DqXQ8zXwXOFGJlIipGVr3oOkAzU/yTJMk9T/PG3BpkuxaU58zz8cyadLOai2ETo1fE8mjKRs9rJ6l9fJk0aR9cVvji2q9mtbpRHTj4cmhSbtp1+NxAxbNxm3rtN2sVLN1Xzn01uNFjEXzPNG0rmZf8Q9PxiqL5nEyNivnQnm0qe1+0Yzxynarm69mOjW5TnVuHmR4CtIxH4Npx8vkMLfK9t6TaRVqxRBPkY6rkDyXPzXf3I1PrjW9s7kQohAqG7uRc3GLcXmXd7YOKevUqap3iRNLd/4X9cSTs988HJx+k9o8dSkVuRevpHuf1tIh786fWIembB/3woRZm+Z9xofxOeZ9FZrPYnkdnz95X4OmrIunlt9NHq1F83nGh7xX13jya77K+OB5ne/smtK8juU1npe883RII1SXv1r28+iSd+ZoUv3+28GlLrFqEr3J+C3vklXzZSW69zwYPk0yvl+LhFJRN7Xdpscv44OnTrk0vWPpRjV2W0zKb1yyalJi3tXLVWgGZDy6JlEVEsvYux6JCrOMqtlbhn5dj6gZnPGomn0sAypRbE3aVOGWEaMZnvGYmtWssymxNGfFMpamtjPP+UQ66zH3YApOzvwjzY39kKZZVJOCV/Ep4ccb/DT321LMJ1920+Oyg92o2dShx5j+gPwAi5+GBQAAAAAAAAAAAAAAAAAAAGBJvgD+5DZit7mvxgAAAABJRU5ErkJggg==';this.activeAudioInfoTitle.innerHTML='<i class=\"fa-solid fa-music\"></i> <span>'+'Unknown'+'</span>';this.activeAudioInfoArtist.innerHTML='<i class=\"fa-solid fa-user\"></i> '+'Unknown';this.activeAudioInfoAlbum.innerHTML='<i class=\"fa-solid fa-book\"></i> '+'Unknown';this.activeAudioInfoYear.innerHTML='<i class=\"fa-solid fa-calendar\"></i> '+'Unknown'}renderPlaylist(){(this.options.playlist&&this.playlistContainer)&&(this.playlistContainer.innerHTML='',this.playlist.forEach((dH,dI)=>{var dJ=document.createElement('div');let dK=dH.split('/').pop();dJ.className='track';if(dI===0)dJ.classList.add('active_track');this.currentTrack=this.playlist[0];this.music.src=this.currentTrack;dJ.innerHTML=`<span class="track-number">${dI+1} ${dK}</span><div class="track-actions"><span><i class="fa-solid fa-play PlaylistPlayIcon" data-playlistID="${dI}"></i></span><span><i class="fa-solid fa-trash-can PlaylistDeleteIcon" data-playlistID="${dI}"></i></span></div>`;this.playlistContainer.appendChild(dJ)}))}playTrack(dL){this.trackIndex=dL;this.changeTrack()}async readMetadata(dM){var dN=await fetch(dM).then(res=>res).then(r=>r.blob()).catch(e=>(console.error(e),null));if(!dN)return;var dO=new FileReader;dO.onload=()=>{var dP=CP_Player.parseID3Tags(dO.result);dP!=null?this.renderAudioInfo(dP):this.resetAudioInfo()};dO.readAsArrayBuffer(dN)}async getMediaStream(dQ){var dR=await fetch(dQ).then(res=>res).then(r=>r.blob()).catch(e=>console.error(e));if(!dR)return;var dS=new FileReader;dS.onload=()=>dS.result;dS.readAsArrayBuffer(dR)}static parseID3Tags(dT){var dU=new DataView(dT);if(String.fromCharCode(dU.getUint8(0))==='I'&&String.fromCharCode(dU.getUint8(1))==='D'&&String.fromCharCode(dU.getUint8(2))==='3'){var dV=`${dU.getUint8(3)}.${dU.getUint8(4)}`;var dW=CP_Player.getID3Size(dU,6),dX={};let eC=10;while (eC<dW) {var dY=String.fromCharCode(dU.getUint8(eC),dU.getUint8(eC+1),dU.getUint8(eC+2),dU.getUint8(eC+3)),dZ=dU.getUint32(eC+4);if(dZ===0)break;if(dY==='APIC')dX.image=CP_Player.parseAPICFrame(dU,eC+10,dZ);else{var eA=dU.getUint8(eC+10),eB=new TextDecoder(eA===1?'utf-16':'utf-8').decode(new DataView(dT, eC+11, dZ-1));dX[dY]=eB}eC+=10+dZ}return dX}console.error('No ID3 tags found.');return null}static parseAPICFrame(eD,eE,eF){let eG=eE;let eH='';while (eD.getUint8(eG)!==0)eH+=String.fromCharCode(eD.getUint8(eG++));eG++;eG++;while (eD.getUint8(eG)!==0)eG++;eG++;var eI=CP_Player.arrayBufferToBase64(new Uint8Array(eD.buffer, eG, eF-(eG-eE)));return`data:${eH};base64,${eI}`}static arrayBufferToBase64(eJ){let eK='';var eL=new Uint8Array(eJ);var eM=eL.byteLength;for(let i=0;i<eM;i+=10000)eK+=String.fromCharCode.apply(null,eL.subarray(i,i+10000));return btoa(eK)}static getID3Size(eN,eO){var eP=((eN.getUint8(eO)&0x7f)<<21)|((eN.getUint8(eO+1)&0x7f)<<14)|((eN.getUint8(eO+2)&0x7f)<<7)|(eN.getUint8(eO+3)&0x7f);return eP}createDancingBars(eQ){var eR=document.createElement('div');eR.classList.add('equalizer');this.equalizer=eR;for(let i=0;i<5;i++){const eS=document.createElement('div');eS.classList.add('bar');eS.style.animationDelay=`${i*0.1}s`;this.equalizer.appendChild(eS)}eQ.appendChild(eR)}}
